#!/usr/bin/env bash
# Purpose: Generate public and local-only documentation artifacts.
# Created: 2026-02-19
# Last updated: 2026-02-19

set -euo pipefail

REPO_ROOT=""
if command -v git >/dev/null 2>&1; then
  REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null)" || true
fi
[[ -z "$REPO_ROOT" ]] || [[ ! -d "$REPO_ROOT" ]] && REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

PY_SCRIPT="$REPO_ROOT/framework/tools/generate_docs_artifacts.py"
if [[ ! -f "$PY_SCRIPT" ]]; then
  echo "Missing generator: $PY_SCRIPT" >&2
  exit 1
fi

if command -v python3 >/dev/null 2>&1; then
  python3 "$PY_SCRIPT" --repo-root "$REPO_ROOT"
elif command -v python >/dev/null 2>&1; then
  python "$PY_SCRIPT" --repo-root "$REPO_ROOT"
else
  echo "Python is required to generate docs artifacts." >&2
  exit 1
fi
